<template name="layout">
  <div class="container">
    {{> header}}
  <div id="main" class="row-fluid">
    {{> yield}}
  </div>
  </div>
</template>

<template name="header">
  <header class="navbar">
    <div class="navbar-inner">
      <a class="brand" href="/">NVQhq</a>
      <div class="container">
        <div class="nav pull-right">
          {{> user_info}}
        </div>
      </div>
    </div>
  </header>
</template>

<template name="user_info">
  {{#if currentUser}}
    {{> user_loggedin}}
  {{else}}
    {{> user_loggedout}}
  {{/if}}
</template>

<template name="user_loggedin">
  {{#if loggingIn}}
    <li><a>Logging in...</a></li>
  {{else}}
    <li>
      <img class="img-rounded" style="height: 32px; margin-top: 4px;" src="{{currentUser.profile.avatar_url}}" />
    </li>
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown">
        {{currrentUser.profile.login}}
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a>Account Settings</a></li>
        <li class="divider"></li>
        <li><a id="logout">Logout</a></li>
      </ul>
    </li>
  {{/if}}
</template>

<template name="user_loggedout">
  <li><a id="login">Login</a></li>
</template>